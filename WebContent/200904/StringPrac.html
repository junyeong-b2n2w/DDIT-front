<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Insert title here</title>
		<link href ="../css/public.css" rel="stylesheet">
		<script>
		
			function proc1(){
				perNum = prompt("주민등록번호를 입력해 주세요", "000000-0000000");
				
				if(perNum.length != 14){
					alert("형식이 맞지 않습니다"); 
					return;
					}
				
				console.log(perNum);
				
				frontNum = perNum.split("-")[0];
				endNum = perNum.split("-")[1];
				
				//성별 구하기
				if(endNum.charAt(0) == 1 || endNum.charAt(0) ==3){
					gender = "남성";
				}else if(endNum.charAt(0) == 2 || endNum.charAt(0) ==4){
					gender = "여성";
				}else{
					gender = "??";
				}
				
				//생일 구하기
				birthDay = (endNum.charAt(0) == 1 || endNum.charAt(0) == 2 ? "19":"20")  + frontNum.substring(0,2) + "년 " + frontNum.substring(2,4) + "월 " + frontNum.substring(4,6) +"일"; 
				
				console.log(birthDay);
				
				
				//나이 구하기
				age = new Date().getFullYear() - birthDay.substring(0,4) +1;
				console.log(age);
			
			
				res = "주민등록번호 : " + perNum + "<br>" 
				+ "생일 : " + birthDay + "<br>" 
				+ "성별 : " + gender + " 나이 : " + age;
				
				document.querySelector('#result1').innerHTML = res;
				
			}
			
			function proc2(){
				perNum = prompt("주민등록번호를 입력해 주세요", "000000-0000000");
				
				if(perNum.length != 14){
					alert("형식이 맞지 않습니다"); 
					return;
					}
				//곱할 배열 만들기
// 				arr = new Array(2,3,4,5,6,7,8,9,2,3,4,5);
				arr = "234567892345";
				
				console.log(arr);
				
				
				regPerNum = perNum.split("-")[0] + perNum.split("-")[1];
				
				console.log(regPerNum);
				
				sum = 0;
				for(i=0;i<arr.length; i++){
					sum += arr[i] * regPerNum[i]; 
				}
				
				console.log(sum);
				
				num1 = sum % 11;
				
				num2 = 11 - num1;
				if (num2==10){
					num2 = 0;
				}else if(num2 == 11){
					num2 = 1;
				}
				
				if(num2 == perNum.charAt(13)){
					res = "유효";
				}else{
					res = "유효치 않음"
				}
				
				document.querySelector('#result2').innerHTML = res;
			}
		
		
		</script>
		
		
	</head>
	<body>
		<div class="box">
			<h3>연습1</h3>
			주민등록번호 입력받아 생년월일과성별 출력하는 프로그램<br>
			입력은 prompt<Br>
			<input type="button" value="입력" onclick="proc1()">
			<div id="result1"> </div>
		</div>
		
		<div class="box">
			<h3>유효성 검사</h3>
			<input type="button" value="확인" onclick="proc2()">
			<div id="result2"> </div>
		</div>
		
		
	</body>
</html>